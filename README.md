# Binout
Matlab functions to work with LS-DYNA `binout` files. The function `get_binout_data()` (called the binout reader) is the one that reads the binout file.
The function `get_d3plot_d3thdt_control_data()` is a helper function that is called (internally) from within the binout reader function.
The function `struct2graph()` is a standalone function that takes a MATALB (nested) `struct` and produces figures showing the hierarchy map (structured graphs), as a convenient means of to easily see what fields are available in such `struct`.

## binout reader
### What it does?
The function `get_binout_data()` takes the path to an LS-DYNA `binout` file and returns the data in it to be easily manipulated (i.e. post-processed) in MATLAB. 

### what is `binout`?
Binout is a binary file generated by LS-DYNA after running LS-DYNA model. It contains various results databases, such as "matsum" (material summary and energy data), "nodout" (node output data, like displacements, velocities, etc), "elout" (element output data, like stresses, stress-resultants, strains, etc), and so on. 

### Usage
The formal syntax is 
```
[binin] = get_binout_data(binout_filename)
```
#### inputs:
`binout_filename` = [Required] (absoulte or relative) path to the root binary `binout` file. Type: [`char`|`string`]. If there are more than one binout file, the function is configured to auto-detect them and read them sequentially. Data from these files will be joined. 
#### outputs:
`binin` = structure containing all the data in the `binout` file(s). Type: MATLAB scalar structure [`struct`]. 

This is a highly nested structure. Use the "." (dot) indexing method in MATLAB to traverse the `binin` structure to arrive at a data of interest. 
The returned `binin` structure will have `n` root fields, where (`n-1`) is the number of databases contained in the `binout` file(s), such as "matsum", "nodout", etc. The last `n`<sup>th</sup> field (when available) is called "control".
Every root field is itself a scaler structure. Some kinds of root structures will have intermediate sub-structures (as in the `binout` file). At some level, there will be idnentically two structures: "metadata" and "data". For example, the "binin.matsum" structure will have the fields "metadata" and "data" as its immediate fields. On the other hand, the "binin.elout" structure will contain itermediate fields like "shell". In this case, the "metadata" and "data" structures are fields of "binin.elout.shell".
The "data" structure has fields whose names are borrowed directly from the original `binout` file. The values associated with these fields are the actual data of interest. The naming of the fields are practically self-explainatory.
The "metadata" structure is similar to the "data" (described above), and it contains mostly meta-data and few important data, namely the id's of parts, nodes, etc. The id's are usually stored in the "ids" field of the "metadata" structure.
The root field "control" under the `binin` structure contains supplementary control data retrieved from the root `d3plot` file, which is provided through (internally) calling the `get_d3plot_d3thdt_control_data()` helper function. The binout reader function will auto-detect the root d3plot file. Among the control data retrieved is the element-node connectivity arrays and some others like the initial geometry.

#### optional
If needed, one can use the standalone function `struct2graph()` to visually display the hierarchy map of the `binin` structure. The function accepts a scalar (possibly highly nested) MATLAB structure as the first input argument, and produces the figures and returns their handles. If this is your first time, provide the second input argument (called `labelQ`) with value equals to `"All"` so that every root sub-structure, under the `binin`, gets displayed in a seperate figure that shows all the terminal fields under "data" and "metadata". The input `struct` can be nested with any arbitrary depth.     

## Contributions
This work is part of a PhD study at the Blast and Impact Engineering Research Group, at the University of Sheffield (2023), supervised by 
Prof. Andrew Tyas (a.tyas@sheffield.ac.uk)
Dr. Samuel E. Rigby (sam.rigby@sheffield.ac.uk) - <a href="https://twitter.com/Dr_SamRigby">https://twitter.com/Dr_SamRigby</a>
Dr. Maurizio Guadagnini (m.gaudagnini@sheffield.ac.uk)

developed by:
Dr. Samuel E. Rigby (sam.rigby@sheffield.ac.uk)
Saud A. E. Alotaibi (salotaibi2@sheffield.ac.uk), sponsored by Qassim University (https://qu.edu.sa), Saudi Arabia, and the Saudi Arabian Cultural Bureau in London, UK.

 `   